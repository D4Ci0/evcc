template: relay
group: generic
products:
  - description:
      de: Relais-basiertes Home Energy Management System
      en: Relay-based Home Energy Management System
requirements:
  description:
    en: Simple relay-based HEMS for load management. Uses a boolean signal to control power limits. Requires a configured root circuit for load management.
    de: Einfaches relais-basiertes HEMS für Lastmanagement. Verwendet ein Boolesches Signal zur Steuerung von Leistungsgrenzen. Benötigt einen konfigurierten Stammkreis für Lastmanagement.
params:
  - name: maxpower
    description:
      de: Maximale Leistung
      en: Maximum power
    type: number
    unit: W
    required: true
    help:
      de: Maximale Leistung in Watt, die bei aktiviertem Limit gesetzt wird
      en: Maximum power in watts to set when limit is active
    example: 4200
  - name: limit
    description:
      de: Grenzwertsignal-Konfiguration
      en: Limit signal configuration
    type: structured
    required: true
    help:
      de: Plugin-Konfiguration für das Grenzwertsignal (Boolescher Wert)
      en: Plugin configuration for the limit signal (boolean value)
    example: |
      source: http
      uri: http://example.com/api/limit
      jq: .active

render: |
  type: relay
  maxpower: {{ .maxpower }}
  limit:
    {{ yaml .limit | indent 4 }}